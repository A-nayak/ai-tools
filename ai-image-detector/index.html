<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nayak AI Image Detector</title>

  <meta name="description" content="Detect whether an image is AI-generated or real using AI-powered models." />
  <meta name="keywords" content="AI image detector, deepfake detector, stable diffusion detector, AI tools" />
  <meta name="author" content="Ambuj Nayak" />

  <link rel="icon" href="/favicon.ico" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>
</head>
<body class="min-h-screen bg-gradient-to-tr from-slate-800 via-slate-700 to-slate-900 flex items-center justify-center py-10">
  <div class="w-full max-w-2xl bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-2xl rounded-2xl p-8">

    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold text-center text-slate-800 dark:text-slate-100 flex items-center justify-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-600 dark:text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.55-4.55a2 2 0 10-2.83-2.83L12 7.17 7.28 2.45a2 2 0 10-2.83 2.83L9 10m6 0l4.55 4.55a2 2 0 002.83-2.83L15 10zm-6 0L4.45 5.45a2 2 0 10-2.83 2.83L9 10z" />
        </svg>
        Nayak AI Image Detector
      </h1>
      <button id="darkModeToggle" class="p-2 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200">
        <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zM4 12a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" viewBox="0 0 20 20" fill="currentColor">
          <path d="M17.293 13.293A8 8 0 016.707 2.707a8 8 0 1010.586 10.586z" />
        </svg>
      </button>
    </div>

    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1" for="imageInput">Choose an image</label>
    <input id="imageInput" type="file" accept="image/*" class="w-full mb-4 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 dark:file:bg-indigo-900/30 file:text-indigo-700 dark:file:text-indigo-300 hover:file:bg-indigo-100 dark:hover:file:bg-indigo-900/40" />

    <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1" for="imageUrl">Or paste image URL</label>
    <input id="imageUrl" type="text" placeholder="https://example.com/image.jpg" class="w-full rounded-md border-slate-300 dark:border-slate-600 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-slate-700 dark:text-slate-200 p-2 mb-4" />

    <div class="flex flex-wrap gap-4 justify-center mb-6">
      <button id="detectBtn" class="bg-indigo-600 dark:bg-indigo-700 hover:bg-indigo-700 dark:hover:bg-indigo-600 text-white font-semibold py-2 px-6 rounded-md transition">Detect</button>
      <button id="clearBtn" class="bg-slate-500 dark:bg-slate-600 hover:bg-slate-600 dark:hover:bg-slate-500 text-white font-semibold py-2 px-6 rounded-md transition">Clear</button>
    </div>

    <pre id="output" class="whitespace-pre-wrap bg-slate-100 dark:bg-slate-700/50 rounded-md p-4 h-32 overflow-auto text-sm text-slate-800 dark:text-slate-200">Result will appear here...</pre>
  </div>

  <script>
    const darkModeToggle = document.getElementById('darkModeToggle');
    const sunIcon = document.getElementById('sunIcon');
    const moonIcon = document.getElementById('moonIcon');
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme === 'dark' || (!currentTheme && prefersDarkScheme.matches)) {
      document.documentElement.classList.add('dark');
      sunIcon.classList.add('hidden');
      moonIcon.classList.remove('hidden');
    }
    darkModeToggle.addEventListener('click', () => {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      sunIcon.classList.toggle('hidden');
      moonIcon.classList.toggle('hidden');
    });

    const detectBtn = document.getElementById('detectBtn');
    const clearBtn = document.getElementById('clearBtn');
    const output = document.getElementById('output');
    const imageInput = document.getElementById('imageInput');
    const imageUrlInput = document.getElementById('imageUrl');

    detectBtn.addEventListener('click', async () => {
      let imageBytes;
      if (imageInput.files.length > 0) {
        imageBytes = await imageInput.files[0].arrayBuffer();
      } else if (imageUrlInput.value.trim() !== "") {
        const res = await fetch(imageUrlInput.value);
        imageBytes = await res.arrayBuffer();
      } else {
        alert("Please upload an image or paste a URL.");
        return;
      }

      output.textContent = "⏳ Detecting...";
      try {
        const response = await fetch("https://tools.nayak.eu.org/api/detect", {
          method: "POST",
          body: imageBytes
        });
        const result = await response.json();
        if (Array.isArray(result) && result.length > 0) {
          output.textContent = `${result[0].label} (${(result[0].score * 100).toFixed(2)}% confidence)`;
        } else {
          output.textContent = "❌ Error analyzing image.";
        }
      } catch (err) {
        output.textContent = "❌ Network error: " + err.message;
      }
    });

    clearBtn.addEventListener('click', () => {
      imageInput.value = "";
      imageUrlInput.value = "";
      output.textContent = "Result will appear here...";
    });
  </script>
</body>
</html>
